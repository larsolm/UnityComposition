[#manual/instruction-caller]

## Instruction Caller

The Instruction Caller is a bridge between the editor and <<manual/instruction-graph.html,Instructions>> allowing variables to be sent to <<manual/instruction-graph.html,Instructions>> as inputs and read from <<manual/instruction-graph.html,Instructions>> as outputs.

### Editing Instruction Callers

In the Inspector, an Instruction Caller will appear as a drop down list showing all the available <<manual/instruction-graph.html,Instructions>> in the project. When an <<manual/instruction-graph.html,Instruction>> is selected two lists will appear containing the variables the selected <<manual/instruction-graph.html,Instruction>> exposes as inputs and outputs.

image::instruction-caller.png[]

Inputs can be specified as Values or References. Use Value to set a specific value and Reference to specify the name of a variable to use to look up the value. Outputs can be Ignored or set to a Reference. Use Ignore to indicate the value will not be used and Reference to specify the name of a variable to copy the output value to once excution of the <<manual/instruction-graph.html,Instruction>> completes.

### Using Instruction Callers

To use an Instruction Caller in a custom https://docs.unity3d.com/ScriptReference/MonoBehaviour.html[component^] or https://docs.unity3d.com/ScriptReference/ScriptableObject.html[asset^] add a field to the object with type <<reference/instruction-caller.html,InstructionCaller>>:

[source,cs]
----
public InstructionCaller Instructions = new InstructionCaller();
----

This will automatically set up the editor experience described above. To execute the assigned <<manual/instruction-graph.html,Instruction>> use the <<manual/composition-manager.html,Composition Manager>>:

[source,cs]
----
CompositionManager.Instance.RunInstruction(Instructions, context, this);
----

_context_ is an <<reference/instruction-context.html,InstructionContext>> and the third parameter (_this_ in this case) can be any object to pass to the <<manual/instruction-graph.html,Instruction>> as the _This_ property on the <<reference/instruction-store.html,InstructionStore>>. Here is a complete example of a custom https://docs.unity3d.com/ScriptReference/MonoBehaviour.html[component^] that will execute an <<manual/instruction-graph.html,Instruction>> when the object is https://docs.unity3d.com/ScriptReference/MonoBehaviour.OnMouseUp.html[clicked^]:

[source,cs]
----
using PiRhoSoft.CompositionEngine;
using UnityEngine;

public class Interaction : MonoBehaviour
{
	[Tooltip("The instructions to run when this object is clicked")]
	public InstructionCaller Instructions = new InstructionCaller();

	private InstructionContext _context = new InstructionContext();

	void OnMouseUp()
	{
		CompositionManager.Instance.RunInstruction(Instructions, _context, this);
	}
}
----

ifdef::backend-multipage_html5[]
link:reference/instruction-caller.html[Reference]
endif::[]